# CHÆ¯Æ NG TRÃŒNH QUáº¢N LÃ KHO VÃ€ BÃN Cá»¦A Cá»¬A HÃ€NG LAPTOP88
MÃ´ táº£ bÃ i toÃ¡n quáº£n lÃ½: Cá»­a hÃ ng laptop88 lÃ  má»™t trong nhá»¯ng chuá»—i cá»­a hÃ ng bÃ¡n laptop lá»›n vÃ  uy tÃ­n. CÃ³ ráº¥t nhiá»u chi nhÃ¡nh trÃªn cáº£ nÆ°á»›c. Äá»ƒ quáº£n lÃ½ chuá»—i cá»­a hÃ ng nhiá»u nhÆ° váº­y cáº§n sá»± quáº£n lÃ½ tháº­t tá»‘t Ä‘á»ƒ Ä‘áº£m báº£o lá»£i nhuáº­n vÃ  doanh thu. GiÃºp tá»‘i Æ°u hoÃ¡ cÃ´ng viá»‡c, giÃºp bÃ¡o cÃ¡o chÃ­nh xÃ¡c vá» tÃ¬nh hÃ¬nh kinh doanh. BÃ i táº­p nÃ y sáº½ sá»­ dá»¥ng ngÃ´n ngá»¯ SQL Ä‘á»ƒ quáº£n lÃ½ kho nháº­p - xuáº¥t sáº£n pháº©m vÃ  viá»‡c bÃ¡n hÃ ng cá»§a cá»§a hÃ ng.

## Nhá»¯ng chá»©c nÄƒng xÃ¢y dá»±ng Ä‘á»ƒ quáº£n lÃ½ kho vÃ  bÃ¡n hÃ ng:
1. Quáº£n lÃ½ sáº£n pháº©m
- ThÃªm, sá»­a Ä‘á»•i, xoÃ¡ sáº£n pháº©m
- TÃ¬m kiáº¿n, lá»c sáº£n pháº©m theo cÃ¡c tiÃªu chÃ­ cá»§a ngÆ°á»i dÃ¹ng
- Xem thÃ´ng tin chi tiáº¿t tá»«ng sáº£n pháº©m
- Xem sá»‘ lÆ°á»£ng tá»“n kho cá»§a má»—i sáº£n pháº©m
  
2. Quáº£n lÃ½ kho
- Khi bÃ¡n sáº£n pháº©m hoáº·c nháº­p thÃªm sáº£n pháº©m cáº­p nháº­t sá»‘ lÆ°á»£ng hÃ ng cÃ²n láº¡i trong kho.
- Xem sá»‘ lÆ°á»£ng vÃ  thá»‘ng kÃª sáº£n phÃ¢m hÃ ng tá»“n kho
## Nháº­p xuáº¥t vÃ  bÃ¡o cÃ¡o cÃ¡c thÃ´ng tin liÃªn quan Ä‘áº¿n kho vÃ  viá»‡c bÃ¡n hÃ ng
1. Nháº­p hÃ ng:
- Quáº£n lÃ½ viá»‡c nháº­p hÃ ng tá»« nhÃ  cung cáº¥p vÃ o kho hÃ ng.
- Ghi nháº­n thÃ´ng tin vá» sáº£n pháº©m, sá»‘ lÆ°á»£ng, giÃ¡ cáº£ vÃ  nhÃ  cung cáº¥p.
- Cáº­p nháº­t láº¡i sá»‘ hÃ ng toofn kho sau má»—i láº§n bÃ¡n hoáº·c nháº­p hÃ ng vá».
- Theo dÃµi Ä‘Æ¡n hÃ ng tá»« nhÃ  cung cáº¥p vÃ  xÃ¡c nháº­n quáº£n lÃ½ khi hÃ ng Ä‘Ã£ vÃ o kho.
2. Xuáº¥t hÃ ng:
- Quáº£n lÃ½ viá»‡c xuáº¥t cÃ¡c máº·t hÃ ng tá»« kho hÃ ng Ä‘á»ƒ bÃ¡n cho khÃ¡ch hÃ ng.
- Ghi nháº­n thÃ´ng tin vá» sáº£n pháº©m, sá»‘ lÆ°á»£ng, giÃ¡ cáº£ vÃ  thÃ´ng tin khÃ¡ch hÃ ng.
- Cáº­p nháº­t tá»“n kho sau má»—i láº§n xuáº¥t hÃ ng.
- Theo dÃµi Ä‘Æ¡n hÃ ng vÃ  xÃ¡c nháº­n khi Ä‘Ã£ Ä‘Æ°á»£c giao.
3. BÃ¡o cÃ¡o
- BÃ¡o cÃ¡o vá» doanh thu theo ngÃ y, doanh thu theo thÃ¡ng,... giÃºp quáº£n lÃ½ Ä‘Æ°á»£c lá»£i nhuáº­n.
- Táº¡o vÃ  xem bÃ¡o cÃ¡o hoáº¡t Ä‘á»™ng kinh doanh cá»§a cá»­a hÃ ng, sá»‘ lÆ°á»£ng hÃ ng tá»“n kho nhiá»u nháº¥t, sá»‘ lÆ°á»£ng hÃ ng bÃ¡n cháº¡y nháº¥t,....
  
1. Sáº£n pháº©m sáº½ quáº£n lÃ½ nhá»¯ng thÃ´ng tin nhÆ°: ðŸ”‘MÃ£ sáº£n pháº©m, tÃªn sáº£n pháº©m, thÆ°Æ¡ng hiá»‡u, máº«u, thÃ´ng sá»‘, giÃ¡, sá»‘ lÆ°á»£ng cÃ²n láº¡i.
2. KhÃ¡ch hÃ ng: ðŸ”‘MÃ£ khÃ¡ch hÃ ng, tÃªn khÃ¡ch hÃ ng, sá»‘ Ä‘iá»‡n thoáº¡i,Ä‘á»‹a chá»‰.
3. ÄÆ¡n hÃ ng: ðŸ”‘MÃ£ Ä‘Æ¡n hÃ ng, mÃ£ khÃ¡ch hÃ ng, ngÃ y Ä‘áº·t hÃ ng, tá»•ng tiá»n.
4. Chi tiáº¿t Ä‘Æ¡n hÃ ng: ðŸ”‘MÃ£ chi tiáº¿t Ä‘Æ¡n hÃ ng, mÃ£ Ä‘Æ¡n hÃ ng, mÃ£ sáº£n pháº©m, sá»‘ lÆ°á»£ng, giÃ¡.
5. NhÃ  cung cáº¥p: ðŸ”‘MÃ£ nhÃ  cung cáº¥p, tÃªn nhÃ  cung cáº¥p, tÃªn ngÆ°á»i liÃªn há»‡, sá»‘ Ä‘iá»‡n thoáº¡i ngÆ°á»i liÃªn há»‡, Ä‘á»‹a chá»‰.
6. Danh má»¥c: ðŸ”‘MÃ£ danh má»¥c, tÃªn danh má»¥c.
7. Giao Dá»‹ch kho: ðŸ”‘MÃ£ giao dá»‹ch, mÃ£ sáº£n pháº©m, sá»‘ lÆ°á»£ng, ngÃ y giao dá»‹ch, loáº¡i giao dá»‹ch.
   
NhÆ° váº­y, dá»±a theo nhá»¯ng thÃ´ng tin mÃ  ta Ä‘Ã£ thu tháº­p Ä‘Æ°á»£c chÃºng ta sáº½ xÃ¢y dá»±ng cÃ¡c báº£ng Ä‘Ã¡p á»©ng yÃªu cáº§u quáº£n lÃ½ cá»§a cá»§a hÃ ng laptop88.

Táº¡o cÃ¡c báº£ng nhÆ° mÃ´ táº£ trong SQL Sever:
1. Báº£ng Sáº£n Pháº©m
   
![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/7859b2ac-35ef-45b4-8565-b449629f3f91)

2. Báº£ng KhÃ¡ch HÃ ng

![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/40b42ca9-9d15-4cba-a28e-ae91afa9ed53)

3. Báº£ng ÄÆ¡n HÃ ng 

![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/79c004e4-4187-4dc2-9fe4-95c32e51db23)

4. Báº£ng Chi tiáº¿t Ä‘Æ¡n hÃ ng

![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/1354b432-1e09-48e9-957c-537298cc097b)

5. Báº£ng NhÃ  Cung Cáº¥p

![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/1f87356d-7d0d-49bc-9c33-a3ae00e338ad)

6. Báº£ng danh má»¥c

![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/d10efd30-6977-44d5-b259-87e511193b6e)

7. Giao dá»‹ch kho

![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/ae843c0b-c46d-4650-b062-1435ef5729a6)

Táº¡o sÆ¡ Ä‘á»“ thá»±c thá»ƒ liÃªn káº¿t giá»¯a cÃ¡c báº£ng
![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/0cb4ae05-4722-4a9f-a839-68f60e8109d7)


ThÃªm dá»¯ liá»‡u vÃ o cÃ¡c báº£ng
1. Dá»¯ liá»‡u thÃªm vÃ o báº£ng SanPham
```
INSERT INTO SanPham (MaSanPham, TenSanPham, ThuongHieu, Mau, ThongSo, Gia, SoLuongConLai, MaDanhMuc, MaNhaCC) VALUES
('K1', 'Laptop A1', 'BrandA', 'Äen', 'CPU: i5, RAM: 8GB, SSD: 256GB, MÃ n hÃ¬nh: 14 inch', 15000000, 30, 'D1', 'NCC1'),
('K2', 'Laptop A2', 'BrandA', 'XÃ¡m', 'CPU: i7, RAM: 16GB, SSD: 512GB, MÃ n hÃ¬nh: 15.6 inch', 25000000, 20, 'D1', 'NCC1'),
('K3', 'Laptop B1', 'BrandB', 'Tráº¯ng', 'CPU: Ryzen 5, RAM: 8GB, SSD: 512GB, MÃ n hÃ¬nh: 14 inch', 14000000, 50, 'D2', 'NCC2'),
('K4', 'Laptop B2', 'BrandB', 'Äen', 'CPU: Ryzen 7, RAM: 16GB, SSD: 1TB, MÃ n hÃ¬nh: 15.6 inch', 27000000, 15, 'D2', 'NCC2'),
('K5', 'Laptop C1', 'BrandC', 'Xanh', 'CPU: i3, RAM: 4GB, HDD: 1TB, MÃ n hÃ¬nh: 14 inch', 10000000, 40, 'D1', 'NCC3'),
('K6', 'Laptop C2', 'BrandC', 'Äá»', 'CPU: i5, RAM: 8GB, SSD: 256GB, MÃ n hÃ¬nh: 14 inch', 18000000, 25, 'D1', 'NCC3'),
('K7', 'Laptop D1', 'BrandD', 'Äen', 'CPU: Ryzen 5, RAM: 8GB, SSD: 512GB, MÃ n hÃ¬nh: 14 inch', 16000000, 35, 'D3', 'NCC4'),
('K8', 'Laptop D2', 'BrandD', 'XÃ¡m', 'CPU: i7, RAM: 16GB, SSD: 1TB, MÃ n hÃ¬nh: 15.6 inch', 29000000, 10, 'D3', 'NCC4'),
('K9', 'Laptop E1', 'BrandE', 'Tráº¯ng', 'CPU: i5, RAM: 8GB, SSD: 256GB, MÃ n hÃ¬nh: 14 inch', 17000000, 20, 'D2', 'NCC5'),
('K10', 'Laptop E2', 'BrandE', 'Äen', 'CPU: Ryzen 7, RAM: 16GB, SSD: 1TB, MÃ n hÃ¬nh: 15.6 inch', 30000000, 15, 'D2', 'NCC5'); 
```

2. Dá»¯ liá»‡u thÃªm vÃ o báº£ng Khach Hang
```
INSERT INTO KhachHang (MaKhachHang, TenKhachHang, DiaChi, SoDienThoai) VALUES ('KH1', 'Nguyá»…n VÄƒn Anh', 'Sá»‘ 123, ÄÆ°á»ng ABC, Quáº­n XYZ, ThÃ nh phá»‘ HCM', '0123456789'),
('KH2', 'Tráº§n Thá»‹ BÃ¬nh', 'Sá»‘ 456, ÄÆ°á»ng DEF, Quáº­n UVW, ThÃ nh phá»‘ Hanoi', '0987654321'),
('KH3', 'LÃª VÄƒn Cung', 'Sá»‘ 789, ÄÆ°á»ng GHI, Quáº­n RST, ThÃ nh phá»‘ ÄÃ  Náºµng', '0365478921'),
('KH4', 'Pháº¡m Thá»‹ Dung', 'Sá»‘ 012, ÄÆ°á»ng JKL, Quáº­n MNO, ThÃ nh phá»‘ Háº£i PhÃ²ng', '0932145678');
```
3. Dá»¯ liá»‡u thÃªm vÃ o báº£ng Ä‘Æ¡n hÃ ng

```
INSERT INTO DonHang (MaDonHang, MaKhachHang, NgayDat,TongTien)
VALUES
('DH1', 'KH1', '2024-06-12','100000'),
('DH2', 'KH2', '2024-06-13','123456'),
('DH3', 'KH3', '2024-06-14','245654'),
('DH4', 'KH4', '2024-06-15','135768');
```
4. ThÃªm dá»¯ liá»‡u vÃ o báº£ng ChiTietDonHang
```
INSERT INTO ChiTietDonHang(MaChiTietDonHang,MaDonHang,MaSanPham,SoLuong,Gia)
VALUES 
('M10', 'DH1', 'K1', 2, 15000000),
('M11', 'DH1', 'K2', 1, 25000000),
('M12', 'DH2', 'K3', 3, 14000000),
('M13', 'DH3', 'K4', 1, 27000000),
('M14', 'DH3', 'K5', 2, 10000000),
('M15', 'DH4', 'K6', 1, 18000000);
```
5. ThÃªm dá»¯ liá»‡u vÃ o báº£ng NhaCungCap
```
INSERT INTO NhaCungCap (MaNhaCC, TenNCC, TenNguoiLienHe, DiaChi) VALUES
('NCC1', N'CÃ´ng ty A', N'Nguyá»…n VÄƒn A', N'123 ÄÆ°á»ng ABC, Quáº­n XYZ, ThÃ nh phá»‘ HCM'),
('NCC2', N'CÃ´ng ty B', N'Tráº§n Thá»‹ B', N'456 ÄÆ°á»ng DEF, Quáº­n UVW, ThÃ nh phá»‘ Hanoi'),
('NCC3', N'CÃ´ng ty C', N'LÃª VÄƒn C', N'789 ÄÆ°á»ng GHI, Quáº­n RST, ThÃ nh phá»‘ ÄÃ  Náºµng');
```
6. ThÃªm dá»¯ liá»‡u vÃ o báº£ng Danh Má»¥c
```
INSERT INTO DanhMuc(MaDanhMuc,TenDanhMuc) VALUES
('D1','Danh muc 1'),
('D2','Danh muc 2'),
('D3','Danh muc 3');
```

8. ThÃªm dá»¯ liá»‡u vÃ o báº£ng GiaoDichKho
```
INSERT INTO GiaoDichKho(MaGiaoDichKho,MaSanPham,SoLuong,NgayGiaoDich,LoaiGiaoDich,MaNCC) VALUES
('GD1', 'K1', 10, '2024-06-12', N'Nháº­p hÃ ng', 'NCC1'),
('GD2', 'K2', 5, '2024-06-13', N'Nháº­p hÃ ng', 'NCC2'),
('GD3', 'K3', 8, '2024-06-14', N'Nháº­p hÃ ng', 'NCC3'),
('GD4', 'K4', 15, '2024-06-15', N'Nháº­p hÃ ng', 'NCC1'),
('GD5', 'K5', 20, '2024-06-16', 'Nháº­p hÃ ng', 'NCC2'),
('GD6', 'K6', 12, '2024-06-17', 'Nháº­p hÃ ng', 'NCC3'),
('GD7', 'K7', 25, '2024-06-18', 'Nháº­p hÃ ng', 'NCC1'),
('GD8', 'K8', 18, '2024-06-19', 'Nháº­p hÃ ng', 'NCC2');
```

## XÃ‚Y Dá»°NG CÃC THá»¦ Tá»¤C THEO CÃC CHá»¨C NÄ‚NG MONG MUá»N
1. Quáº£n lÃ½ viá»‡c bÃ¡n hÃ ng
- ThÃªm, sá»­a, xoÃ¡ sáº£n pháº©m
- TÃ¬m kiáº¿m sáº£n pháº©m, lá»c sáº£n pháº©m theo cÃ¡c tiÃªu chÃ­ cá»§a ngÆ°á»i quáº£n lÃ½ hoáº·c cá»§a khÃ¡ch hÃ ng
- Xem thÃ´ng tin chá»‰ tiáº¿t má»—i sáº£n pháº©m
- Doanh thu cá»§a má»™t ngÃ y, má»™t thÃ¡ng,...
- Sá»‘ lÆ°á»£ng sáº£n pháº©m bÃ¡n cháº¡y nháº¥t.
2. Quáº£n lÃ½ kho 
- Thá»‘ng kÃª sá»‘ lÆ°á»£ng hÃ ng trong kho
- BÃ¡o cÃ¡o tÃ¬nh tráº¡ng hÃ ng trong kho, sá»‘ hÃ ng tá»“n, sá»‘ hÃ ng Ä‘Ã£ háº¿t chÆ°a nháº­p vá».

-------------------------
1. Quáº£n lÃ½ viá»‡c bÃ¡n hÃ ng
- THÃŠM Sáº¢N PHáº¨M:
![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/4e620bb6-1d7f-47db-b18c-58df5190091c)

```
---Táº O THá»¦ Tá»¤C THÃŠM Sáº¢N PHáº¨M Má»šI
![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/3d836c40-b514-4c15-9746-8153337ef4e7)

CREATE PROCEDURE themsanpham
@TenSanPham nvarchar(50),
@ThuongHieu nvarchar(50),
@Mau nvarchar(50),
@ThongSo nvarchar(MAX),
@Gia decimal(10, 2),
@SoLuongConLai int,
@MaDanhMuc nvarchar(50),
@MaNhaCC nvarchar(50)

AS 
BEGIN 
SET NOCOUNT ON;
INSERT INTO SanPham (TenSanPham,ThuongHieu,Mau,ThongSo,Gia,SoLuongConLai,MaDanhMuc,MaNhaCC) 
VALUES (@TenSanPham,@ThuongHieu,@Mau,@ThongSo,@Gia,@SoLuongConLai,@MaDanhMuc,@MaNhaCC);
end
```

- Sá»­ dá»¥ng thá»§ tá»¥c:
![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/b8ed82c9-e3d0-4ed1-a1ee-8f7512252492)


```
EXEC themsanpham 
    @MaSanPham = 'M12',
    @TenSanPham = N'Laptop A',
    @ThuongHieu = N'BrandX',
    @Mau = N'Den',
    @ThongSo = N'Intel Core i7, 16GB RAM, 512GB SSD',
    @Gia = 1500.00,
    @SoLuongConLai = 10,
    @MaDanhMuc = 'D3',
    @MaNhaCC = 'NCC3';
```
Sáº£n pháº©m Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o thÃ nh cÃ´ng 
![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/ca3ba401-4767-4ffd-b23c-ecebb5217ea4)


- XOÃ Sáº¢N PHáº¨M
  ![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/e1e5e0cf-0152-4115-a957-1c7a60bffb29)

```
CREATE PROCEDURE XoaSanPham
    @MaSanPham NVARCHAR(50)
AS 
BEGIN
    SET NOCOUNT ON;

    BEGIN TRY
        -- Kiá»ƒm tra xem sáº£n pháº©m cÃ³ tá»“n táº¡i hay khÃ´ng
        IF EXISTS (SELECT 1 FROM SanPham WHERE MaSanPham = @MaSanPham)
        BEGIN 
            -- XÃ³a sáº£n pháº©m khá»i báº£ng SanPham
            DELETE FROM SanPham WHERE MaSanPham = @MaSanPham;
        END 
        ELSE 
        BEGIN
            -- Náº¿u sáº£n pháº©m khÃ´ng tá»“n táº¡i, Ä‘Æ°a ra thÃ´ng bÃ¡o lá»—i
            RAISERROR('Sáº£n pháº©m vá»›i MaSanPham = %s khÃ´ng tá»“n táº¡i.', 16, 1, @MaSanPham);
        END
    END TRY
    BEGIN CATCH
        -- Xá»­ lÃ½ lá»—i
        DECLARE @ErrorMessage NVARCHAR(4000);
        DECLARE @ErrorSeverity INT;
        DECLARE @ErrorState INT;

        SELECT 
            @ErrorMessage = ERROR_MESSAGE(),
            @ErrorSeverity = ERROR_SEVERITY(),
            @ErrorState = ERROR_STATE();

        RAISERROR (@ErrorMessage, @ErrorSeverity, @ErrorState);
    END CATCH;
END;
```
Thá»­ nghiá»‡m thá»§ tá»¥c
```
EXEC XoaSanPham @MaSanPham = N'M12';
```
ÄÃ£ XoÃ¡ thÃ nh cÃ´ng


- Cáº¬P NHáº¬T Sáº¢N PHáº¨M
```
---Táº O THá»¦ Tá»¤C Cáº¬P NHáº¬T Sáº¢N PHáº¨M 
CREATE PROCEDURE capnhatsanpham
@MaSanPham nvarchar(50),
@TenSanPham nvarchar(50),
@ThuongHieu nvarchar(50),
@Mau nvarchar(50),
@ThongSo nvarchar(MAX),
@Gia decimal(10, 2),
@SoLuongConLai int,
@MaDanhMuc nvarchar(50),
@MaNhaCC nvarchar(50)

AS
BEGIN
    SET NOCOUNT ON;

    BEGIN TRY
        -- Kiá»ƒm tra xem sáº£n pháº©m cÃ³ tá»“n táº¡i hay khÃ´ng
        IF EXISTS (SELECT 1 FROM SanPham WHERE MaSanPham = @MaSanPham)
        BEGIN 
            -- Cáº­p nháº­t thÃ´ng tin sáº£n pháº©m
            UPDATE SanPham
            SET 
                TenSanPham = COALESCE(@TenSanPham, TenSanPham),
                ThuongHieu = COALESCE(@ThuongHieu, ThuongHieu),
                Mau = COALESCE(@Mau, Mau),
                ThongSo = COALESCE(@ThongSo, ThongSo),
                Gia = COALESCE(@Gia, Gia),
                SoLuongConLai = COALESCE(@SoLuongConLai, SoLuongConLai),
                MaDanhMuc = COALESCE(@MaDanhMuc, MaDanhMuc),
                MaNhaCC = COALESCE(@MaNhaCC, MaNhaCC)
            WHERE MaSanPham = @MaSanPham;
        END 
        ELSE 
        BEGIN
            -- Náº¿u sáº£n pháº©m khÃ´ng tá»“n táº¡i, Ä‘Æ°a ra thÃ´ng bÃ¡o lá»—i
            RAISERROR('Sáº£n pháº©m vá»›i MaSanPham = %s khÃ´ng tá»“n táº¡i.', 16, 1, @MaSanPham);
        END
    END TRY
    BEGIN CATCH
        -- Xá»­ lÃ½ lá»—i
        DECLARE @ErrorMessage NVARCHAR(4000);
        DECLARE @ErrorSeverity INT;
        DECLARE @ErrorState INT;

        SELECT 
            @ErrorMessage = ERROR_MESSAGE(),
            @ErrorSeverity = ERROR_SEVERITY(),
            @ErrorState = ERROR_STATE();

        RAISERROR (@ErrorMessage, @ErrorSeverity, @ErrorState);
    END CATCH;
END;
```
Káº¿t quáº£ thá»±c nghiá»‡m thá»§ tá»¥c:
```
EXEC capnhatsanpham
    @MaSanPham = N'K10',
    @TenSanPham = N'LapTop Dell gameming G5',
    @Gia = 1600.00,
	@Mau = 'Gaming',
	@ThongSo = 'i5 1050H',
	@ThuongHieu = 'mau xanh',
    @SoLuongConLai = 8,
	@MaDanhMuc = 'D3',
	@MaNhaCC = 'NCC5';
```
![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/9faeace7-6d85-4e0a-afe8-1bb0ba56cc19)

Sáº£n pháº©m Ä‘Æ°á»£c cáº­p nháº­t thÃ nh cÃ´ng 

- XÃ¢y dá»±ng thá»§ tá»¥c tÃ¬m kiáº¿m sáº£n pháº©m theo yÃªu cáº§u cá»§a khÃ¡ch hÃ ng hoáº·c cá»§a ngÆ°á»i quáº£n lÃ½ dá»±a vÃ o cÃ¡c thÃ´ng sá»‘: TÃªn Sáº£n Pháº©m, ThÆ°Æ¡ng Hiá»‡u, Máº«u,....
```
---Táº O THá»¦ Tá»¤C TÃŒM KIáº¾M Sáº¢N PHáº¨M Dá»°A VÃ€O CÃC YÃŠU Cáº¦U-----
CREATE PROCEDURE timkiemsanpham
    @MaSanPham NVARCHAR(50) = NULL,
    @TenSanPham NVARCHAR(50) = NULL,
    @ThuongHieu NVARCHAR(50) = NULL,
    @Mau NVARCHAR(50) = NULL,
    @ThongSo NVARCHAR(MAX) = NULL,
    @MaDanhMuc NVARCHAR(50) = NULL,
    @MaNhaCC NVARCHAR(50) = NULL
AS
BEGIN
    SET NOCOUNT ON;

    SELECT *
    FROM SanPham
    WHERE 
        (MaSanPham = ISNULL(@MaSanPham, MaSanPham))
        AND (TenSanPham LIKE '%' + ISNULL(@TenSanPham, '') + '%')
        AND (ThuongHieu LIKE '%' + ISNULL(@ThuongHieu, '') + '%')
        AND (Mau LIKE '%' + ISNULL(@Mau, '') + '%')
        AND (ThongSo LIKE '%' + ISNULL(@ThongSo, '') + '%')
        AND (MaDanhMuc = ISNULL(@MaDanhMuc, MaDanhMuc))
        AND (MaNhaCC = ISNULL(@MaNhaCC, MaNhaCC));
END;
```

- Thá»±c nghiá»‡m thá»§ tá»¥c tÃ¬m kiáº¿m sáº£n pháº©m
![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/9be40117-5e99-4d4e-a4a8-209d220166ac)

- XEM THÃ”NG TIN CHI TIáº¾T Má»–I Sáº¢N PHáº¨M
```SQL
---- XEM THONG TIN CHI TIET MOI SAN PHAM
CREATE PROCEDURE xemchitietsanpham
    @MaSanPham NVARCHAR(50) = NULL,
    @TenSanPham NVARCHAR(50) = NULL,
    @ThuongHieu NVARCHAR(50) = NULL,
    @Mau NVARCHAR(50) = NULL,
    @ThongSo NVARCHAR(MAX) = NULL,
    @MaDanhMuc NVARCHAR(50) = NULL,
    @MaNhaCC NVARCHAR(50) = NULL

AS
BEGIN 
SET NOCOUNT ON;
SELECT * FROM SanPham WHERE MaSanPham = @MaSanPham;
END
```
Káº¿t quáº£ thá»±c nghiá»‡m:

![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/524fc3b6-62e5-4c1c-895f-22c4165c462c)


- XÃ‚Y Dá»°NG THá»¦ Tá»¤C TINMHS DOANH THU TRONG 1 NGÃ€Y
```SQL
---- xay dung thu tuc tinh doanh thu 1 ngay
CREATE PROCEDURE xemdoanhthu1ngay
    @Ngay DATE
AS
BEGIN
    SET NOCOUNT ON
    DECLARE @DoanhThu DECIMAL(10, 2);

    SELECT @DoanhThu = SUM(TongTien)
    FROM DonHang
    WHERE NgayDat = @Ngay;

    SELECT @Ngay AS Ngay, ISNULL(@DoanhThu, 0) AS DoanhThu;
END;

```

Káº¿t quáº£ thá»±c nghiá»‡m chÆ°Æ¡ng trÃ¬nh
![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/8e91cd94-ccd5-41e0-bcfd-bb5f1a118d02)

- XÃ‚Y Dá»°NG THá»¦ Tá»¤C THá»NG KÃŠ 

```SQL
-- TÃ¬m sáº£n pháº©m bÃ¡n cháº¡y nháº¥t trong 1 thÃ¡ng
CREATE PROCEDURE sanphambanchaynhattrongthang
    @Thang INT,
    @Nam INT
AS
BEGIN
    SET NOCOUNT ON; -- Táº¯t thÃ´ng bÃ¡o sá»‘ báº£n ghi bá»‹ áº£nh hÆ°á»Ÿng

    -- Khai bÃ¡o biáº¿n Ä‘á»ƒ lÆ°u ngÃ y báº¯t Ä‘áº§u vÃ  ngÃ y káº¿t thÃºc cá»§a thÃ¡ng cáº§n thá»‘ng kÃª
    DECLARE @StartDate DATE, @EndDate DATE;
    SET @StartDate = DATEFROMPARTS(@Nam, @Thang, 1); -- NgÃ y Ä‘áº§u tiÃªn cá»§a thÃ¡ng
    SET @EndDate = DATEADD(DAY, -1, DATEADD(MONTH, 1, @StartDate)); -- NgÃ y cuá»‘i cÃ¹ng cá»§a thÃ¡ng

    -- Sá»­ dá»¥ng CTE Ä‘á»ƒ tÃ­nh tá»•ng sá»‘ lÆ°á»£ng sáº£n pháº©m bÃ¡n ra vÃ  láº¥y sáº£n pháº©m bÃ¡n cháº¡y nháº¥t
    WITH BanChayNhat AS (
        SELECT TOP 1
            CT.MaSanPham, -- MÃ£ sáº£n pháº©m
            SUM(CT.SoLuong) AS TongSoLuongBan -- Tá»•ng sá»‘ lÆ°á»£ng sáº£n pháº©m bÃ¡n ra
        FROM ChiTietDonHang CT
        INNER JOIN DonHang DH ON CT.MaDonHang = DH.MaDonHang
        WHERE DH.NgayDat >= @StartDate AND DH.NgayDat <= @EndDate -- Äiá»u kiá»‡n: ÄÆ¡n hÃ ng trong thÃ¡ng
        GROUP BY CT.MaSanPham -- NhÃ³m theo mÃ£ sáº£n pháº©m
        ORDER BY SUM(CT.SoLuong) DESC -- Sáº¯p xáº¿p giáº£m dáº§n theo tá»•ng sá»‘ lÆ°á»£ng bÃ¡n
    )
    -- Truy váº¥n Ä‘á»ƒ láº¥y thÃ´ng tin chi tiáº¿t cá»§a sáº£n pháº©m bÃ¡n cháº¡y nháº¥t
    SELECT 
        BC.MaSanPham, -- MÃ£ sáº£n pháº©m
        SP.TenSanPham, -- TÃªn sáº£n pháº©m
        SP.ThuongHieu, -- ThÆ°Æ¡ng hiá»‡u
        SP.Mau, -- MÃ u sáº¯c
        SP.ThongSo, -- ThÃ´ng sá»‘ ká»¹ thuáº­t
        SP.Gia, -- GiÃ¡ sáº£n pháº©m
        SP.SoLuongConLai -- Sá»‘ lÆ°á»£ng cÃ²n láº¡i trong kho
    FROM BanChayNhat BC
    INNER JOIN SanPham SP ON BC.MaSanPham = SP.MaSanPham; -- LiÃªn káº¿t vá»›i báº£ng SanPham Ä‘á»ƒ láº¥y thÃ´ng tin chi tiáº¿t
END;

```
Káº¿t quáº£ thá»±c nghiá»‡m chÆ°Æ¡ng trÃ¬nh
![image](https://github.com/ngtuananh24/quanlykhovabanhangCUAHANGLAPTOP/assets/168797690/d8abb7f3-2a8a-4cdd-9743-df641d66e013)













